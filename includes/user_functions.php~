<?php 

function userPull() {
	
	$query = "SELECT * FROM login.users"; 
	
	// Query the database for the results
	$results = mysql_query($query);
	// Get number of Total Rows and set variable
	$rows = mysql_num_rows($results);

	if(!$rows) {
		echo "<h2>No Registered Users</h2><br />";
	} else {

	// Set the number of results to display per page
	$page_rows = 10;

	// Determine the number for the last page
	$last = ceil($rows/$page_rows);

	$pagenum = $_REQUEST['pagenum'];
	if (!(isset($pagenum))) {
		$pagenum = 1;
	}

	// The page number cannot be less than 1 or greater then the maximum number of pages
	// It must also exist, if not then display first page.
	if ($pagenum < 1) {
		$pagenum = 1;
	} elseif ($pagenum > $last) {
		$pagenum = $last;
	}

	// Find the maximum amount of pages that exist for the query
	$max = ' limit ' .($pagenum - 1) * $page_rows .',' .$page_rows; 
		
	// Query the database for the results
	$results = mysql_query($query);
	// Get number of Total Rows and set variable
	$rows = mysql_num_rows($results);

	if(!$rows) {
		echo "<h2>No Students Found</h2><br />";
	} else {
	
	// Try Query or Kill Connection
	$data_p = mysql_query($query . $max) or die(mysql_error());
	
	
	// Display User Container and table
	echo "
   <div class='row'>
   <div class='col-md-12'>
   <table class='table table-striped'>	
	<thead>
	<tbody>
	<th>Username</th>
	<th>Email</th>
	<th></th>
	</thead>
	";

	// Display Each Record
	while ($row = mysql_fetch_array($data_p)) {		
		
		// Display the records from the database
		echo "<tr>
     	<td>
     		<form action='view_host.php'>
     		<input type='hidden' name='host_id' value='" . $row['user_name'] . "'/>		
      	<button type='submit' class='btn btn-xs btn-default'>View</button>
         </form>
		</td>      			  
		<td>" . $row['user_name'] . "</td>
		<td>" . $row['user_email'] . "</td>
		</tr>
		";
	}
	
	// PAGINATION IN FOOTER
	echo "<tfoot><tr><td colspan=8>";

	if ($pagenum == 1) { } else {
		echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=1$getappend&terms=$terms$getorder'> <<-First</a> ";
		echo " ";
		$previous = $pagenum-1;
		echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$previous$getappend&terms=$terms$getorder'> <-Previous</a> ";
	} 

	//just a spacer
	echo "Viewing Page $pagenum of $last";

	 //This does the same as above, only checking if we are on the last page, and then generating the Next and Last links
	 if ($pagenum == $last) {
	 } else {
		$next = $pagenum+1;
		echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$next$getappend&terms=$terms$getorder'>Next -></a> ";
		echo " ";
		echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$last$getappend&terms=$terms$getorder'>Last ->></a> ";
	}
	
	echo "</td></tr></tfoot>";
	echo "</tbody>";
	echo "</table>";
	echo "</div>";
	echo "</div>";
		} 
	}
} //end of the userPull function


?>